name: cups-rock
base: ubuntu@22.04
version: '0.1'
summary: CUPS-based printing stack Rock
description: Complete printing environment in a OCI container
license: Apache-2.0
platforms:
    arm64:
    amd64:
    armhf:

services:
  cupsd:
    command: service cups start
    override: replace
    on-failure: restart
    startup: enabled

parts:
  cups:
    plugin: nil
    overlay-packages:
      - cups

  cupsd-config:
    plugin: dump
    source: .
    organize:
      cupsd.conf: etc/cups/cupsd.conf
    after: [cups]
    prime:
      - etc/cups/cupsd.conf
